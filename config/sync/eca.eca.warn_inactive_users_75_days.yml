uuid: b5e6c7d8-2345-4cde-9f01-71b2c3d4e5f6
langcode: en
status: true
dependencies:
  config:
    - views.view.inactive_users
  module:
    - eca_base
    - eca_content
    - eca_views
    - va_gov_eca
id: warn_inactive_users_75_days
modeller: core
label: 'Warn Inactive Users after 75 days'
version: ''
weight: 0
events:
  eca_base_eca_custom:
    plugin: 'eca_base:eca_custom'
    label: 'ECA custom event'
    configuration:
      event_id: inactive_users_warn_75_days
    successors:
      -
        id: eca_views_query
        condition: null
  content_entity_custom:
    plugin: 'content_entity:custom'
    label: 'ECA custom event (entity-aware)'
    configuration:
      event_id: queue_results_75
    successors:
      -
        id: queue_notification
        condition: null
conditions: {  }
gateways: {  }
actions:
  eca_views_query:
    plugin: eca_views_query
    label: 'Views: Inactive Users Query'
    configuration:
      token_name: results
      view_id: inactive_users
      display_id: inactive_75_days
      arguments: ''
    successors:
      -
        id: eca_trigger_content_entity_custo
        condition: null
  action_message_action:
    plugin: action_message_action
    label: 'Display a message to the user'
    configuration:
      message: 'Last login for [entity:name] is [entity:login] so they will receive an email at [entity:mail]'
      replace_tokens: true
    successors: {  }
  eca_trigger_content_entity_custo:
    plugin: eca_trigger_content_entity_custom_event
    label: 'Trigger a custom event (entity-aware)'
    configuration:
      event_id: queue_results_75
      tokens: ''
      object: results
    successors: {  }
  queue_notification:
    plugin: create_advancedqueue_job
    label: 'Queue notification'
    configuration:
      token_name: ''
      type: va_gov_warn_inactive_users_notification
      payload: "template_values:\r\n  template: warn_inactive_users\r\n  uid: \"[entity:uid]\"\r\nvalues:\r\n  days: \"75\""
      queue: warn_inactive_users
    successors: {  }
