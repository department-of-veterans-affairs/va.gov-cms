uuid: 058c5f90-ce1b-4a2e-9a98-4a1e137f03cf
langcode: en
status: true
dependencies:
  enforced:
    module:
      - va_gov_migrate
_core:
  default_config_hash: Eb3DWSPTj-qPQuMK4BZ8RyGSF56yUqOQhdPO7YrP3Qc
id: va_benefits_housing_extra
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: va_new_benefits
label: 'Migrate additional Housing benefits pages from Heroku'
source:
  plugin: embedded_data
  data_rows:
    -
      title: 'VA Home Loan Limits'
      url: 'https://vagov-content-pr-325.herokuapp.com/housing-assistance/home-loans/loan-limits/'
      description: 'Learn about VA home loan limits (also called VA home loan maximums). Find out the current loan limits and how they may affect the amount of money you can borrow using a VA-backed home loan, without a down payment.'
      path: /housing-assistance/home-loans/loan-limits
      lastupdate: 0
    -
      title: 'VA Funding Fee And Loan Closing Costs'
      url: 'https://vagov-content-pr-325.herokuapp.com/housing-assistance/home-loans/funding-fee-and-closing-costs/'
      description: 'The VA funding fee is a one-time payment that the Veteran, service member, or survivor pays on a VA-backed or VA direct home loan. Learn about the VA funding fee and other loan closing costs you may need to pay on your loan.'
      path: /housing-assistance/home-loans/funding-fee-and-closing-costs
      lastupdate: 0
    -
      title: 'Buying A Home With A VA-backed Loan'
      url: 'https://vagov-content-pr-325.herokuapp.com/housing-assistance/home-loans/home-buying-process/'
      description: 'Get step-by-step instructions for buying a home with a VA-backed loan. You''ll get your loan through a private lender, like a bank or mortgage company. We''ll guarantee part of the loan against loss, which will allow your lender to give you better loan terms.'
      path: /housing-assistance/home-loans/home-buying-process
      lastupdate: 0
  ids:
    url:
      type: string
  migration_tools:
    -
      source: url
      source_type: url
      source_operations:
        -
          operation: modifier
          modifier: basicCleanup
      fields:
        page_title:
          obtainer: \Drupal\va_gov_migrate\Obtainer\ObtainTitleNoCaseChange
          jobs:
            -
              job: addSearch
              method: pluckSelector
              arguments:
                - h1
        intro_text:
          obtainer: \Drupal\va_gov_migrate\Obtainer\ObtainAndTestPlainTextWithNewLines
          jobs:
            -
              job: addSearch
              method: pluckSelectorAndTest
              arguments:
                - .va-introtext
                - '@title'
                - '@url'
        featured_content:
          obtainer: \Drupal\va_gov_migrate\Obtainer\ObtainAndTestFeature
          jobs:
            -
              job: addSearch
              method: pluckSelectorAndTest
              arguments:
                - .feature
                - '@title'
                - '@url'
                - innerHTML
        alert_title:
          obtainer: \Drupal\va_gov_migrate\Obtainer\ObtainAlertBlockTitles
          jobs:
            -
              job: addSearch
              method: pluckSelectorAndTest
              arguments:
                - .usa-alert-heading
                - '@title'
                - '@url'
        related_links:
          obtainer: ObtainHtml
          jobs:
            -
              job: addSearch
              method: pluckSelector
              arguments:
                - .va-nav-linkslist--related
                - '1'
                - innerHTML
        body:
          obtainer: \Drupal\va_gov_migrate\Obtainer\ObtainAndTestBody
          jobs:
            -
              job: addSearch
              method: pluckSelectorAndTest
              arguments:
                - article
                - '@title'
                - '@url'
                - innerHTML
        nav_linkslist:
          obtainer: ObtainHtml
          jobs:
            -
              job: addSearch
              method: pluckSelector
              arguments:
                - aside.va-nav-linkslist
                - '1'
                - innerHTML
      dom_operations:
        -
          operation: get_field
          field: page_title
        -
          operation: get_field
          field: intro_text
        -
          operation: get_field
          field: featured_content
        -
          operation: modifier
          modifier: removeSelectorAll
          arguments:
            - '#crisis-expander-link'
        -
          operation: get_field
          field: alert_title
        -
          operation: get_field
          field: related_links
        -
          operation: get_field
          field: nav_linkslist
        -
          operation: modifier
          modifier: removeSelectorAll
          arguments:
            - button.va-btn-sidebarnav-trigger
        -
          operation: modifier
          modifier: removeSelectorAll
          arguments:
            - script
        -
          operation: get_field
          field: body
  constants:
    meta_title_suffix: ' | Veterans Affairs'
process:
  title: page_title
  meta_title:
    plugin: substr
    source: title
    length: 51
  field_meta_title:
    -
      plugin: concat
      source:
        - '@meta_title'
        - constants/meta_title_suffix
  revision_timestamp:
    -
      plugin: default_value
      source: lastupdate
      default_value: 1
  changed:
    -
      plugin: default_value
      source: lastupdate
      default_value: 1
  field_intro_text: intro_text
  field_description: description
  field_plainlanguage_date:
    plugin: format_date
    from_format: n/j/y
    to_format: Y-m-d
    source: plainlanguage_date
  field_alert/target_id: alert_title
  field_administration:
    -
      plugin: default_value
      default_value: 68
  moderation_state:
    plugin: default_value
    default_value: draft
  type:
    plugin: default_value
    default_value: page
destination:
  plugin: 'entity:node'
migration_dependencies: {  }
