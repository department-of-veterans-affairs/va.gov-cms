/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/
(function vaGovMediaIIFE($, once, Drupal) {
  function trackUploadFileSelection(fileName) {
    if (typeof gtag === "function") {
      gtag("event", "image_upload", {
        event_category: "Media",
        event_label: fileName || "file_selected",
        upload_action: "file_selected"
      });
    }
  }
  function trackUploadButtonClick(label) {
    if (typeof gtag === "function") {
      gtag("event", "image_upload", {
        event_category: "Media",
        event_label: label || "upload_button",
        upload_action: "button_click"
      });
    }
  }
  function trackAddMediaClick(label) {
    console.log("vaGovMedia: trackAddMediaClick called with label:", label);
    if (typeof gtag === "function") {
      gtag("event", "image_upload", {
        event_category: "Media",
        event_label: label || "add_media_button",
        upload_action: "add_media_click"
      });
    }
  }
  function trackAltFieldChanged() {
    if (typeof gtag === "function") {
      gtag("event", "image_upload", {
        event_category: "Media",
        event_label: "alt_field",
        upload_action: "alt_field_changed"
      });
    }
  }
  function trackAiAltGenerationClick() {
    if (typeof gtag === "function") {
      gtag("event", "image_upload", {
        event_category: "Media",
        event_label: "ai_alt_generation",
        upload_action: "ai_generate_click"
      });
    }
  }
  function trackSubmitClick() {
    if (typeof gtag === "function") {
      gtag("event", "image_upload", {
        event_category: "Media",
        event_label: "submit",
        upload_action: "submit_click"
      });
    }
  }
  Drupal.behaviors.vaGovMedia = {
    attach: function vaGovMediaAttach(context) {
      console.log("vaGovMedia: attach called");
      function observeAddMedia(element, selector, eventType, handler) {
        try {
          var root = context && typeof context.querySelector === "function" ? context : document;
          var attachmentFlag = "vaGovMediaAttached" + element + eventType;
          var tryAttach = function tryAttach(el) {
            if (!el || el.dataset[attachmentFlag]) return;
            el.addEventListener(eventType, function () {
              var label = el.getAttribute("aria-label") || el.textContent.trim();
              try {
                console.debug("VaGovMedia: observed " + element + " " + eventType, label);
              } catch (_e) {}
              handler();
            });
            el.dataset[attachmentFlag] = "1";
          };
          Array.from(root.querySelectorAll(selector)).forEach(tryAttach);
          var mo = new MutationObserver(function (mutations, observer) {
            for (var i = 0; i < mutations.length; i += 1) {
              var m = mutations[i];
              if (m.addedNodes && m.addedNodes.length) {
                for (var j = 0; j < m.addedNodes.length; j += 1) {
                  var n = m.addedNodes[j];
                  if (n.nodeType === 1) {
                    if (n.matches && n.matches(selector)) {
                      tryAttach(n);
                      observer.disconnect();
                      return;
                    }
                    if (n.querySelectorAll) {
                      Array.from(n.querySelectorAll(selector)).forEach(tryAttach);
                    }
                  }
                }
              }
            }
          });
          mo.observe(root, {
            childList: true,
            subtree: true
          });
        } catch (_e) {}
      }
      ;
      observeAddMedia("AddMediaButton", "input[data-drupal-selector$='field-media-open-button']", "mousedown", trackAddMediaClick);
      observeAddMedia("AddMediaButton", "input[data-drupal-selector$='field-media-open-button']", "touchstart", trackAddMediaClick);
      observeAddMedia("AddMediaButton", "input[data-drupal-selector$='field-media-open-button']", "keydown", trackAddMediaClick);
      observeAddMedia("AltTextField", "input[data-drupal-selector$='edit-media-0-fields-image-0-alt']", "change", trackAltFieldChanged);
      observeAddMedia("AiAltGenerationButton", "button[data-drupal-selector$='edit-media-0-fields-image-0-generate-alt']", "click", trackAiAltGenerationClick);
      observeAddMedia("SubmitButton", "button.js-form-submit.form-submit", "mousedown", trackSubmitClick);
      observeAddMedia("SubmitButton", "button.js-form-submit.form-submit", "touchstart", trackSubmitClick);
      observeAddMedia("SubmitButton", "button.js-form-submit.form-submit", "keydown", trackSubmitClick);
    }
  };
})(jQuery, once, Drupal);