version: '3'
dotenv: [ '.env' ]
output: 'group'

tasks:
  build-storybook:
    desc: Build storybook
    cmds:
    - composer va:ds:storybook

  build-frontend:
    desc: Request a frontend build
    cmds:
    - drush va-gov-content-release:request:submit

  start-next:
    desc: start next.js preview server
    cmds:
    - composer va:next:start

  build:
    deps:
    - build-storybook
    - build-frontend
    - start-next

  default:
    cmds:
    - task: build
